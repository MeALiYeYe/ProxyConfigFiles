auto_update:
  url: https://raw.githubusercontent.com/MeALiYeYe/ProxyConfigFiles/refs/heads/main/Egern/Egern.yaml
  interval: 86400
ipv6: true
http_port: 3080
socks_port: 3090
allow_external_connections: false
vif_only: true
hide_vpn_icon: false
hijack_dns:
- '*:53'
- '*:853'
- '*:8853'
geoip_db_url: https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country-without-asn.mmdb
asn_db_url: https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country-asn.mmdb
proxy_latency_test_url: https://www.gstatic.com/generate_204
direct_latency_test_url: https://wifi.vivo.com.cn/generate_204
compat_route: true
include_all_networks: false
include_apns: false
include_cellular_services: false
include_local_networks: false
dns:
  bootstrap:
  - 223.5.5.5
  - 223.6.6.6
  - 2400:3200::1
  - 2400:3200:baba::1
  upstreams:
    DomesticDNS:
    - https://doh.pub/dns-query
    - quic://dns.alidns.com
    - https://dns.alidns.com/dns-query
    ForeignDNS:
    - https://dns.google/dns-query
    - https://dns.cloudflare.com/dns-query
    - https://cloudflare-dns.com/dns-query
  forward:
  - proxy_rule_set:
      match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/Apple/Apple_Domain.list
      value: DomesticDNS
  - proxy_rule_set:
      match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/Proxy/Proxy_Domain.list
      value: ForeignDNS
      disabled: false
  - wildcard:
      match: '*'
      value: DomesticDNS
  hosts:
    ip6-localhost:
    - ::1
    ip6-loopback:
    - ::1
    ip6-localnet:
    - fe00::0
    ip6-mcastprefix:
    - ff00::0
    ip6-allnodes:
    - ff02::1
    ip6-allrouters:
    - ff02::2
    ip6-allhosts:
    - ff02::3
    dns.google:
    - 8.8.4.4
    - 8.8.8.8
    - 2001:4860:4860::8844
    - 2001:4860:4860::8888
    dns64.dns.google:
    - 2001:4860:4860::64
    - 2001:4860:4860::6464
    dns.cloudflare.com:
    - 104.16.248.249
    - 104.16.249.249
    - 2606:4700::6810:f9f9
    - 2606:4700::6810:f8f9
    cloudflare-dns.com:
    - 104.16.248.249
    - 104.16.249.249
    - 2606:4700::6810:f9f9
    - 2606:4700::6810:f8f9
    1dot1dot1dot1.cloudflare-dns.com:
    - 1.1.1.1
    - 1.0.0.1
    - 2606:4700:4700::1001
    - 2606:4700:4700::1111
    one.one.one.one:
    - 1.1.1.1
    - 1.0.0.1
    - 2606:4700:4700::1001
    - 2606:4700:4700::1111
    dns.alidns.com:
    - 223.5.5.5
    - 223.6.6.6
    - 2400:3200:baba::1
    - 2400:3200::1
    doh.pub:
    - 120.53.53.53
    - 1.12.12.12
    - '2402:4e00:1::'
    - '2402:4e00::'
    dot.pub:
    - 120.53.53.53
    - 1.12.12.12
    - '2402:4e00:1::'
    - '2402:4e00::'
    raw.githubusercontent.com:
    - 185.199.108.133
    - 185.199.109.133
    - 185.199.110.133
    - 185.199.111.133
    - 2606:50c0:8000::154
    - 2606:50c0:8001::154
    - 2606:50c0:8002::154
    - 2606:50c0:8003::154
    iosapps.itunes.apple.com:
    - iosapps.itunes.apple.com.download.ks-cdn.com
policy_groups:
- external:
    name: BaidunProxy
    type: select
    urls:
    - https://raw.githubusercontent.com/MeALiYeYe/ProxyConfigFiles/refs/heads/main/Egern/BaiduProxy.yaml
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Server.png
    hidden: false
- external:
    name: Proxies
    type: select
    urls:
    - https://sub.store/download/collection/Sub?target=Egern
    icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/icon/sub(1).png
    hidden: false
- select:
    name: ReDirect
    policies:
    - DIRECT
    - æ±Ÿè‹
    - å¹¿ä¸œ
    - æµ™æ±Ÿ
    - åŒ—äº¬
    - æ²³åŒ—
    flatten: false
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/China.png
    hidden: false
- select:
    name: Domestic
    policies:
    - DIRECT
    - æ±Ÿè‹
    - å¹¿ä¸œ
    - æµ™æ±Ÿ
    - åŒ—äº¬
    - æ²³åŒ—
    flatten: false
    icon: https://raw.githubusercontent.com/Koolson/Qure/refs/heads/master/IconSet/Color/Domestic.png
    hidden: false
- select:
    name: Emby
    policies:
    - DIRECT
    - é¦™æ¸¯
    - å°æ¹¾
    - ç‹®åŸ
    - æ—¥æœ¬
    - ç¾å›½
    - ä½å€
    - é«˜å€
    flatten: false
    icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/icon/emby.png
    hidden: false
- select:
    name: Tiktok
    policies:
    - DIRECT
    - é¦™æ¸¯
    - å°æ¹¾
    - ç‹®åŸ
    - æ—¥æœ¬
    - ç¾å›½
    - ä½å€
    - é«˜å€
    flatten: false
    icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/refs/heads/main/icon/tiktok(1).png
    hidden: false
- select:
    name: Youtube
    policies:
    - DIRECT
    - é¦™æ¸¯
    - å°æ¹¾
    - ç‹®åŸ
    - æ—¥æœ¬
    - ç¾å›½
    - ä½å€
    - é«˜å€
    flatten: false
    icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/refs/heads/main/icon/youtube.png
    hidden: false
- select:
    name: Media
    policies:
    - DIRECT
    - é¦™æ¸¯
    - å°æ¹¾
    - ç‹®åŸ
    - æ—¥æœ¬
    - ç¾å›½
    - ä½å€
    - é«˜å€
    flatten: false
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/ForeignMedia.png
    hidden: false
- select:
    name: OpenAi
    policies:
    - DIRECT
    - é¦™æ¸¯
    - å°æ¹¾
    - ç‹®åŸ
    - æ—¥æœ¬
    - ç¾å›½
    - ä½å€
    - é«˜å€
    flatten: false
    icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/icon/ChatGPT-green.png
    hidden: false
- select:
    name: Telegram
    policies:
    - DIRECT
    - é¦™æ¸¯
    - å°æ¹¾
    - ç‹®åŸ
    - æ—¥æœ¬
    - ç¾å›½
    - ä½å€
    - é«˜å€
    flatten: false
    icon: https://raw.githubusercontent.com/Koolson/Qure/refs/heads/master/IconSet/Color/Telegram_X.png
    hidden: false
- select:
    name: Cloudflare
    policies:
    - DIRECT
    - é¦™æ¸¯
    - å°æ¹¾
    - ç‹®åŸ
    - æ—¥æœ¬
    - ç¾å›½
    - ä½å€
    - é«˜å€
    flatten: false
    icon: https://raw.githubusercontent.com/Koolson/Qure/refs/heads/master/IconSet/Color/Cloudflare.png
    hidden: false
- select:
    name: Google
    policies:
    - DIRECT
    - é¦™æ¸¯
    - å°æ¹¾
    - ç‹®åŸ
    - æ—¥æœ¬
    - ç¾å›½
    - ä½å€
    - é«˜å€
    flatten: false
    icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/refs/heads/main/icon/google(1).png
    hidden: false
- select:
    name: Github
    policies:
    - DIRECT
    - é¦™æ¸¯
    - å°æ¹¾
    - ç‹®åŸ
    - æ—¥æœ¬
    - ç¾å›½
    - ä½å€
    - é«˜å€
    flatten: false
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/GitHub.png
    hidden: false
- select:
    name: Microsoft
    policies:
    - DIRECT
    - é¦™æ¸¯
    - å°æ¹¾
    - ç‹®åŸ
    - æ—¥æœ¬
    - ç¾å›½
    - ä½å€
    - é«˜å€
    flatten: false
    icon: https://raw.githubusercontent.com/Koolson/Qure/refs/heads/master/IconSet/Color/Microsoft.png
    hidden: false
- select:
    name: Apple
    policies:
    - DIRECT
    - é¦™æ¸¯
    - å°æ¹¾
    - ç‹®åŸ
    - æ—¥æœ¬
    - ç¾å›½
    - ä½å€
    - é«˜å€
    flatten: false
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Apple-2.png
    hidden: false
- select:
    name: Foreign
    policies:
    - DIRECT
    - é¦™æ¸¯
    - å°æ¹¾
    - ç‹®åŸ
    - æ—¥æœ¬
    - ç¾å›½
    - ä½å€
    - é«˜å€
    flatten: false
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Global.png
    hidden: false
- select:
    name: Final
    policies:
    - DIRECT
    - Proxies
    flatten: true
    icon: https://raw.githubusercontent.com/Koolson/Qure/refs/heads/master/IconSet/Color/Final.png
    hidden: false
- fallback:
    name: é¦™æ¸¯
    policies:
    - Proxies
    flatten: true
    filter: é¦™æ¸¯|HK|ğŸ‡­ğŸ‡°
    interval: 300
    timeout: 5
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/HK.png
    hidden: false
- fallback:
    name: å°æ¹¾
    policies:
    - Proxies
    flatten: true
    filter: å°æ¹¾|TW|ğŸ‡¹ğŸ‡¼|ğŸ‡¼ğŸ‡¸|ğŸ‡¨ğŸ‡³
    interval: 300
    timeout: 5
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/TW.png
    hidden: false
- fallback:
    name: ç‹®åŸ
    policies:
    - Proxies
    flatten: true
    filter: æ–°åŠ å¡|SG|ç‹®åŸ|ğŸ‡¸ğŸ‡¬
    interval: 300
    timeout: 5
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/SG.png
    hidden: false
- fallback:
    name: æ—¥æœ¬
    policies:
    - Proxies
    flatten: true
    filter: æ—¥æœ¬|JP|ğŸ‡¯ğŸ‡µ
    interval: 300
    timeout: 5
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/JP.png
    hidden: false
- fallback:
    name: ç¾å›½
    policies:
    - Proxies
    flatten: true
    filter: ç¾å›½|US|ğŸ‡ºğŸ‡¸
    interval: 300
    timeout: 5
    icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/icon/US(2).png
    hidden: false
- fallback:
    name: ä½å€
    policies:
    - Proxies
    flatten: true
    filter: 0\.\d+
    interval: 300
    timeout: 5
    icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/refs/heads/main/icon/liuliang(2).png
    hidden: false
- fallback:
    name: é«˜å€
    policies:
    - Proxies
    flatten: true
    filter: (?!0\.)[1-9]\d*(?:\.\d+)
    interval: 300
    timeout: 5
    icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/refs/heads/main/icon/liuliang(3).png
    hidden: false
- fallback:
    name: æ±Ÿè‹
    policies:
    - BaidunProxy
    flatten: true
    filter: å—äº¬|è‹å·
    interval: 60
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Round_Robin_1.png
    hidden: false
- fallback:
    name: å¹¿ä¸œ
    policies:
    - BaidunProxy
    flatten: true
    filter: å¹¿å·
    interval: 60
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Quantumult_X.png
    hidden: false
- fallback:
    name: åŒ—äº¬
    policies:
    - BaidunProxy
    flatten: true
    filter: åŒ—äº¬
    interval: 60
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Qure.png
    hidden: false
- fallback:
    name: æ²³åŒ—
    policies:
    - BaidunProxy
    flatten: true
    filter: ä¿å®š
    icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/icon/Loon(6).png
    hidden: false
- fallback:
    name: æµ™æ±Ÿ
    policies:
    - BaidunProxy
    flatten: true
    filter: æµ™æ±Ÿ
    icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/icon/Surge(13).png
    hidden: false
rules:
- and:
    match:
    - not:
        match:
          dest_port:
            match: 53,853,8853
    - protocol:
        match: quic
    policy: REJECT
    disabled: false
- and:
    match:
    - not:
        match:
          rule_set:
            match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/ChinaMax/ChinaMax_All_No_Resolve.list
    - dest_port:
        match: '443'
    - protocol:
        match: udp
    policy: REJECT
    disabled: false
- and:
    match:
    - user_agent:
        match: '*Telegram*'
    - or:
        match:
        - ip_cidr:
            match: 224.0.0.0/4
            no_resolve: true
        - ip_cidr:
            match: 0.0.0.0/8
            no_resolve: true
    policy: REJECT
    disabled: false
- rule_set:
    match: https://raw.githubusercontent.com/MeALiYeYe/ProxyConfigFiles/refs/heads/main/Egern/rule/Reject.yaml
    policy: REJECT
    disabled: false
- rule_set:
    match: https://raw.githubusercontent.com/MeALiYeYe/ProxyConfigFiles/refs/heads/main/Egern/rule/Direct.yaml
    policy: DIRECT
    disabled: false
- rule_set:
    match: https://raw.githubusercontent.com/MeALiYeYe/ProxyConfigFiles/refs/heads/main/Egern/rule/Proxy.yaml
    policy: Foreign
    disabled: false
- rule_set:
    match: https://raw.githubusercontent.com/MeALiYeYe/ProxyConfigFiles/refs/heads/main/Egern/rule/Emby.yaml
    policy: Emby
    disabled: false
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/Lan/Lan.list
    policy: DIRECT
    disabled: false
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/BlockHttpDNS/BlockHttpDNS.list
    policy: REJECT
    disabled: false
- rule_set:
    match: https://raw.githubusercontent.com/TG-Twilight/AWAvenue-Ads-Rule/refs/heads/main/Filters/AWAvenue-Ads-Rule-Surge-RULE-SET.list
    policy: REJECT
    disabled: false
- rule_set:
    name: ReDirect
    match: https://raw.githubusercontent.com/MeALiYeYe/anti-ip-attribution/refs/heads/main/generated/surge.list
    policy: ReDirect
    disabled: false
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/China/China_All_No_Resolve.list
    policy: Domestic
    disabled: false
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/TikTok/TikTok.list
    policy: Tiktok
    disabled: false
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTube/YouTube.list
    policy: Youtube
    disabled: false
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/Telegram/Telegram.list
    policy: Telegram
    disabled: false
- rule_set:
    name: ''
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/GlobalMedia/GlobalMedia_All_No_Resolve.list
    policy: Media
    disabled: false
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/OpenAI/OpenAI.list
    policy: OpenAi
    disabled: false
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/Google/Google.list
    policy: Google
    disabled: false
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/Cloudflare/Cloudflare.list
    policy: Cloudflare
    disabled: false
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GitHub/GitHub.list
    policy: Github
    disabled: false
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Microsoft/Microsoft.list
    policy: Microsoft
    disabled: false
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/Apple/Apple_All_No_Resolve.list
    policy: Apple
    update_interval: 86400
    disabled: false
- rule_set:
    match: https://raw.githubusercontent.com/getsomecat/GetSomeCats/Surge/rule/substore.list
    policy: Foreign
    disabled: false
- rule_set:
    match: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/Proxy/Proxy_All_No_Resolve.list
    policy: Foreign
    disabled: false
- geoip:
    match: CN
    policy: Domestic
    no_resolve: true
    disabled: false
- default:
    name: ''
    policy: Final
url_rewrites:
- match: (.*google)\\.cn
  location: $1.com
  status_code: 307
mitm:
  enabled: true
  ca_p12: egern.p12
  ca_passphrase: egern
modules:
- url: https://raw.githubusercontent.com/Script-Hub-Org/Script-Hub/refs/heads/main/modules/script-hub.beta.surge.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/sub-store-org/Sub-Store/refs/heads/master/config/Egern.yaml
  enabled: true
- url: https://raw.githubusercontent.com/ddgksf2013/Modules/refs/heads/main/Adblock.sgmodule
  enabled: true
- url: https://github.com/BiliUniverse/Enhanced/releases/latest/download/BiliBili.Enhanced.yaml
  enabled: true
- url: https://raw.githubusercontent.com/mist-whisper/Surge/master/Modules/YouTube_remove_ads.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/githubdulong/Script/master/Surge/JD_Helper.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/Centralmatrix3/Scripts/refs/heads/master/Module/Redirect.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/cc63/Surge/main/Module/Panel/QiYou/Moore/QiYou.sgmodule
  compat_arguments:
    çœä»½æ‹¼éŸ³: hubei
  enabled: true
- url: https://raw.githubusercontent.com/MeALiYeYe/ProxyConfigFiles/refs/heads/main/Surge/module/Weather.sgmodule
  compat_arguments:
    åŸå¸‚ä»£ç : '101200105'
  enabled: true
- url: https://raw.githubusercontent.com/xream/scripts/main/surge/modules/network-info/net-lsp-x.sgmodule
  enabled: true
- url: https://raw.githubusercontent.com/MeALiYeYe/ProxyConfigFiles/refs/heads/main/Egern/module/skipproxy.yaml
  enabled: true
- name: è·³è¿‡éƒ¨åˆ†åº”ç”¨VPNæ£€æµ‹
  url: https://raw.githubusercontent.com/mieqq/mieqq/master/skip-proxy-lists.sgmodule
  enabled: true
